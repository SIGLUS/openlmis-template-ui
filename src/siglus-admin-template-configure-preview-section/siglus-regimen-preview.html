<div class="regimen-preview template-preview-section">
    <div class="table-container-scroll-x">
        <table class="openlmis-table">
            <thead>
            <tr>
                <th ng-repeat="regimenColumn in vm.regimenColumns | orderBy : 'displayOrder'">
                    {{regimenColumn.label}}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat-start="category in vm.categories">
                <td colspan="{{vm.regimenColumns.length}}" class="grey-background category">{{category}}</td>
            </tr>
            <tr ng-repeat="lineItem in vm.regimenLineItems" ng-repeat-end>
                <td ng-repeat="regimenColumn in vm.regimenColumns"
                    ng-class="{'user-input': vm.isUserInput(regimenColumn), 'col-source': $index > 1}">
                    <span ng-if="$index === 0">{{lineItem.code}}</span>
                    <span ng-if="$index === 1">{{lineItem.regimen}}</span>
                    <span ng-if="$index > 1" >
                    {{vm.columnDisplayName(regimenColumn)}}
                </span>
                </td>
            </tr>
            <tr>
                <td colspan="2" class="grey-background">{{vm.total.label}}</td>
                <td class="col-source" ng-repeat="regimenColumn in vm.regimenColumns" ng-if="$index > 1">
                    {{vm.columnDisplayName(vm.total)}}
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="table-container-scroll-x">
        <table class="openlmis-table">
            <thead>
            <tr>
                <th ng-repeat="summaryColumn in vm.summaryColumns | orderBy : 'displayOrder'">
                    {{summaryColumn.label}}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="lineItem in vm.regimenLineItems">
                <td ng-repeat="summaryColumn in vm.summaryColumns"
                    ng-class="{'user-input': vm.isUserInput(summaryColumn), 'col-source': $index > 0}">
                    <span ng-if="$index === 0">{{lineItem.code}}</span>
                    <span ng-if="$index > 0">{{vm.columnDisplayName(summaryColumn)}}</span>
                </td>
            </tr>
            <tr>
                <td class="grey-background">{{vm.total.label}}</td>
                <td class="col-source" ng-repeat="summaryColumn in vm.summaryColumns" ng-if="$index > 0">
                    {{vm.columnDisplayName(vm.total)}}
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
